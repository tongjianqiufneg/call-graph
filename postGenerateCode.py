import requests

# email_account="Lucy.Tian@ef.cn"
emails= ["Lucy.Tian@ef.cn", "ningmeng.shen@ef.cn","ruby.wucd@ef.cn"]

payload = {}
headers = {
    'Authorization':'eyJ0eXAiOiJKV1QiLCJub25jZSI6IkhNeDNYUXNKVVU2WmRvWEJFc1h6amwtMFViZ1RxalVyajBwMzEyNU1XWWMiLCJhbGciOiJSUzI1NiIsIng1dCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiIwMDAwMDAwMy0wMDAwLTAwMDAtYzAwMC0wMDAwMDAwMDAwMDAiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC81YTU1YzFkNy01MTcyLTRlMGMtYTc5NS1jNzViMDU1Y2EwNTUvIiwiaWF0IjoxNjU1OTc5Mjg1LCJuYmYiOjE2NTU5NzkyODUsImV4cCI6MTY1NTk4Mzg0NiwiYWNjdCI6MCwiYWNyIjoiMSIsImFpbyI6IkFWUUFxLzhUQUFBQTdTejdvdjFKRk9mV05DZzJXVjRFSnNyS2cwVUFXSkJLb1hIbC9Nb1dObkkzUXlCQXVlK2hHYmdBNlZLOTkyWnhQM0JQeDI5ZUdUaVpwaUVodVR3UVBOVHJWaEtZbWplZExMdmFmZjdEUEFVPSIsImFtciI6WyJwd2QiLCJtZmEiXSwiYXBwX2Rpc3BsYXluYW1lIjoiR3JhcGggRXhwbG9yZXIiLCJhcHBpZCI6ImRlOGJjOGI1LWQ5ZjktNDhiMS1hOGFkLWI3NDhkYTcyNTA2NCIsImFwcGlkYWNyIjoiMCIsImZhbWlseV9uYW1lIjoiU2hlbiIsImdpdmVuX25hbWUiOiJMZW1vbiIsImlkdHlwIjoidXNlciIsImlwYWRkciI6IjIyMy4xMTkuNTkuMTMwIiwibmFtZSI6IkxlbW9uIFNoZW4iLCJvaWQiOiIyM2QxNWFlYi1mNTBlLTQ5YWQtYmVlMS1jYzNiYjY5MmZlNGMiLCJwbGF0ZiI6IjMiLCJwdWlkIjoiMTAwMzIwMDBFMzFFOUU0QyIsInJoIjoiMC5BVllBMThGVlduSlJERTZubGNkYkJWeWdWUU1BQUFBQUFBQUF3QUFBQUFBQUFBQldBSVUuIiwic2NwIjoiQVBJQ29ubmVjdG9ycy5SZWFkLkFsbCBBUElDb25uZWN0b3JzLlJlYWRXcml0ZS5BbGwgQ2FsZW5kYXJzLlJlYWRXcml0ZSBDaGF0LlJlYWQgQ2hhdC5SZWFkQmFzaWMgQ29udGFjdHMuUmVhZFdyaXRlIERldmljZU1hbmFnZW1lbnRSQkFDLlJlYWQuQWxsIERldmljZU1hbmFnZW1lbnRTZXJ2aWNlQ29uZmlnLlJlYWQuQWxsIERpcmVjdG9yeS5BY2Nlc3NBc1VzZXIuQWxsIERpcmVjdG9yeS5SZWFkLkFsbCBEaXJlY3RvcnkuUmVhZFdyaXRlLkFsbCBEaXJlY3RvcnkuV3JpdGUuUmVzdHJpY3RlZCBGaWxlcy5SZWFkV3JpdGUuQWxsIEdyb3VwLlJlYWRXcml0ZS5BbGwgSWRlbnRpdHlSaXNrRXZlbnQuUmVhZC5BbGwgTWFpbC5SZWFkIE1haWwuUmVhZFdyaXRlIE1haWxib3hTZXR0aW5ncy5SZWFkV3JpdGUgTm90ZXMuUmVhZFdyaXRlLkFsbCBvcGVuaWQgUGVvcGxlLlJlYWQgUGxhY2UuUmVhZCBQcmVzZW5jZS5SZWFkIFByZXNlbmNlLlJlYWQuQWxsIFByaW50ZXJTaGFyZS5SZWFkQmFzaWMuQWxsIFByaW50Sm9iLkNyZWF0ZSBQcmludEpvYi5SZWFkQmFzaWMgcHJvZmlsZSBSZXBvcnRzLlJlYWQuQWxsIFNpdGVzLlJlYWRXcml0ZS5BbGwgVGFza3MuUmVhZFdyaXRlIFVzZXIuRXhwb3J0LkFsbCBVc2VyLkludml0ZS5BbGwgVXNlci5NYW5hZ2VJZGVudGl0aWVzLkFsbCBVc2VyLlJlYWQgVXNlci5SZWFkLkFsbCBVc2VyLlJlYWRCYXNpYy5BbGwgVXNlci5SZWFkV3JpdGUgVXNlci5SZWFkV3JpdGUuQWxsIGVtYWlsIiwic2lnbmluX3N0YXRlIjpbImttc2kiXSwic3ViIjoiSHk3bWVPN2dvUUtPbXBtVDNIa2JXdHVwS0dWREUxWmpkOGQ2ZjdsWTBoRSIsInRlbmFudF9yZWdpb25fc2NvcGUiOiJBUyIsInRpZCI6IjVhNTVjMWQ3LTUxNzItNGUwYy1hNzk1LWM3NWIwNTVjYTA1NSIsInVuaXF1ZV9uYW1lIjoibGVtb24uc2hlbkBlZi5jbiIsInVwbiI6ImxlbW9uLnNoZW5AZWYuY24iLCJ1dGkiOiJDaWxqRlBENmtrR1VNRUJaM21vWEFBIiwidmVyIjoiMS4wIiwid2lkcyI6WyI2MmU5MDM5NC02OWY1LTQyMzctOTE5MC0wMTIxNzcxNDVlMTAiLCJmZTkzMGJlNy01ZTYyLTQ3ZGItOTFhZi05OGMzYTQ5YTM4YjEiLCJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX3N0Ijp7InN1YiI6ImNvNUtxX3l6bV83d0FpQzZlejVDbnc4azE1QVVwaDJGRXBnd01hSU9RX00ifSwieG1zX3RjZHQiOjE1OTMxNjY3MDd9.bI6PFGXbWG4KfHLVpMKSU_S6gPk90yDGKxZ3sV-D17yQJ83FR6q144cPTfKXCqWsNT0i4cXTtcCqkw-Doi2QgKtoKl6qdVlBYWXD6doGDz4q-wHJCQTwzigvtUMbEFtXHdtb9GoRC3S6HuHDBkPIJ6jg796iVgP7V6onzwDOx3ZWyEZEV30Sozd3WKMjRbBnz6NRlYyyAoiygAZVAS0Rhuvt3UsbF_hOabImCaLGgleQsQS2zzWxFcNerEgT0PqdBf8pzfSsEL_EO4lJbncyG3SJVFmRQ2XN__jUL11UCy4vn6ikd8j80FqTJYDNe95-0ByNb2Q9fUp12cz9Caq2QA'
}


users = []

for email in emails:
    user = {}
    url = "https://graph.microsoft.com/v1.0/users/{}?$select=accountEnabled".format(email)
    response = requests.request("GET", url, headers=headers, data=payload)

    r = response.json()
    user['UPN'] = email
    user['accountStatus'] = r.get("accountEnabled")
    print(user)
    users.append(user)
    # print(user_enabled)
    print(users)
# print("邮箱账号",email_account)
# print("accountEnabled",r.get("accountEnabled"))
